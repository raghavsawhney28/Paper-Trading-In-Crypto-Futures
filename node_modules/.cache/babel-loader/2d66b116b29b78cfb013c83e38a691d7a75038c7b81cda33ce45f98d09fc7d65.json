{"ast":null,"code":"import _slicedToArray from\"C:/Paper-Trading-In-Crypto-Futures/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import classes from\"./Positions.module.css\";import{useContext,useState,useEffect}from\"react\";import DataContext from\"../../context/data\";import LivePrice from\"../../backend/LivePrice.js\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Positions=function Positions(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),Price=_useState2[0],setPrices=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),Percent=_useState4[0],setPercent=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),ProfitPercent=_useState6[0],setProfitPercent=_useState6[1];var _useState7=useState(20048),_useState8=_slicedToArray(_useState7,2),EntryPrice=_useState8[0],setEntryPrice=_useState8[1];var b=useContext(DataContext);useEffect(function(){// WebSocket connection URL\nvar socketUrl=\"wss://stream.binance.com:9443/ws/btcusdt@trade\";// Create a new WebSocket instance\nvar ws=new WebSocket(socketUrl);// Event listener for incoming messages\nws.onmessage=function(event){try{var data=JSON.parse(event.data);var newPrice=parseFloat(data.p).toFixed(2);setPrices(newPrice);setPercent(((newPrice-EntryPrice)/EntryPrice*100).toFixed(2));setProfitPercent((Percent*b.Leverage).toFixed(2));}catch(error){console.error(\"Error parsing incoming data:\",error);}};// Event listener for WebSocket connection error\nws.onerror=function(error){console.error(\"WebSocket connection error:\",error);};// Clean up function to close the WebSocket connection when the component unmounts\nreturn function(){ws.close();};},[EntryPrice,Percent,b.Leverage]);var Margin=450.1;var ProfitUSDT=(Margin/100*ProfitPercent).toFixed(2);var Profit=\"+\".concat(ProfitUSDT,\" USDT (+\").concat(ProfitPercent,\"%)\");return/*#__PURE__*/_jsx(\"div\",{className:classes.div,children:/*#__PURE__*/_jsxs(\"table\",{className:classes.body,children:[/*#__PURE__*/_jsx(\"thead\",{className:classes.head,children:/*#__PURE__*/_jsxs(\"tr\",{className:classes.tr,children:[/*#__PURE__*/_jsx(\"th\",{className:classes.th,children:\"Symbol\"}),/*#__PURE__*/_jsx(\"th\",{className:classes.th,children:\"Size\"}),/*#__PURE__*/_jsx(\"th\",{className:classes.th,children:\"Entry Price\"}),/*#__PURE__*/_jsx(\"th\",{className:classes.th,children:\"Mark Price\"}),/*#__PURE__*/_jsx(\"th\",{className:classes.th,children:\"Liq.Price\"}),/*#__PURE__*/_jsx(\"th\",{className:classes.th,children:\"Margin\"}),/*#__PURE__*/_jsx(\"th\",{className:classes.th,children:\"PNL\"}),/*#__PURE__*/_jsx(\"th\",{className:classes.closeall,children:\"Close All Positions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:classes.trbody,children:[/*#__PURE__*/_jsxs(\"th\",{className:classes.symbol,children:[\"BTCUSDT\",/*#__PURE__*/_jsx(\"div\",{className:classes.leverage,children:/*#__PURE__*/_jsxs(\"span\",{children:[b.Leverage,\"x\"]})})]}),/*#__PURE__*/_jsx(\"td\",{className:classes.td,children:\"2250.50 USDT\"}),/*#__PURE__*/_jsx(\"td\",{className:classes.td,children:\"20,048\"}),/*#__PURE__*/_jsx(LivePrice,{Price:Price}),/*#__PURE__*/_jsx(\"td\",{className:classes.liq,children:\"16,753.42\"}),/*#__PURE__*/_jsxs(\"td\",{className:classes.td,children:[Margin,\" USDT\"]}),/*#__PURE__*/_jsx(\"td\",{className:classes.pnl,children:Profit}),/*#__PURE__*/_jsx(\"td\",{className:classes.td,children:/*#__PURE__*/_jsx(\"div\",{className:classes.close,children:\"X\"})})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:classes.trbody,children:[/*#__PURE__*/_jsxs(\"th\",{className:classes.symbol,children:[\"XRPUSDT\",/*#__PURE__*/_jsx(\"div\",{className:classes.leverage,children:/*#__PURE__*/_jsx(\"span\",{children:\"5x\"})})]}),/*#__PURE__*/_jsx(\"td\",{className:classes.td,children:\"2645.50 USDT\"}),/*#__PURE__*/_jsx(\"td\",{className:classes.td,children:\"0.6016\"}),/*#__PURE__*/_jsx(\"td\",{className:classes.td,children:\"0.7028\"}),/*#__PURE__*/_jsx(\"td\",{className:classes.liq,children:\"0.4652\"}),/*#__PURE__*/_jsx(\"td\",{className:classes.td,children:\"476.10 USDT\"}),/*#__PURE__*/_jsx(\"td\",{className:classes.pnl,children:\"+1546.07 USDT (+315.4%)\"}),/*#__PURE__*/_jsx(\"td\",{className:classes.td,children:/*#__PURE__*/_jsx(\"div\",{className:classes.close,children:\"X\"})})]})})]})});};export default Positions;","map":{"version":3,"names":["classes","useContext","useState","useEffect","DataContext","LivePrice","jsx","_jsx","jsxs","_jsxs","Positions","_useState","_useState2","_slicedToArray","Price","setPrices","_useState3","_useState4","Percent","setPercent","_useState5","_useState6","ProfitPercent","setProfitPercent","_useState7","_useState8","EntryPrice","setEntryPrice","b","socketUrl","ws","WebSocket","onmessage","event","data","JSON","parse","newPrice","parseFloat","p","toFixed","Leverage","error","console","onerror","close","Margin","ProfitUSDT","Profit","concat","className","div","children","body","head","tr","th","closeall","trbody","symbol","leverage","td","liq","pnl"],"sources":["C:/Paper-Trading-In-Crypto-Futures/src/components/positions/Position.js"],"sourcesContent":["import classes from \"./Positions.module.css\";\r\nimport { useContext, useState, useEffect } from \"react\";\r\nimport DataContext from \"../../context/data\";\r\nimport LivePrice from \"../../backend/LivePrice.js\";\r\n\r\nconst Positions = () => {\r\n  const [Price, setPrices] = useState(null);\r\n  const [Percent, setPercent] = useState();\r\n  const [ProfitPercent, setProfitPercent] = useState();\r\n  const [EntryPrice, setEntryPrice] = useState(20048);\r\n  const b = useContext(DataContext);\r\n  useEffect(() => {\r\n    // WebSocket connection URL\r\n    const socketUrl = \"wss://stream.binance.com:9443/ws/btcusdt@trade\";\r\n\r\n    // Create a new WebSocket instance\r\n    const ws = new WebSocket(socketUrl);\r\n\r\n    // Event listener for incoming messages\r\n    ws.onmessage = (event) => {\r\n      try {\r\n        const data = JSON.parse(event.data);\r\n        const newPrice = parseFloat(data.p).toFixed(2);\r\n        setPrices(newPrice);\r\n\r\n        setPercent((((newPrice - EntryPrice) / EntryPrice) * 100).toFixed(2));\r\n        setProfitPercent((Percent * b.Leverage).toFixed(2));\r\n      } catch (error) {\r\n        console.error(\"Error parsing incoming data:\", error);\r\n      }\r\n    };\r\n\r\n    // Event listener for WebSocket connection error\r\n    ws.onerror = (error) => {\r\n      console.error(\"WebSocket connection error:\", error);\r\n    };\r\n\r\n    // Clean up function to close the WebSocket connection when the component unmounts\r\n    return () => {\r\n      ws.close();\r\n    };\r\n  }, [EntryPrice, Percent, b.Leverage]);\r\n\r\n  const Margin = 450.1;\r\n  const ProfitUSDT = ((Margin / 100) * ProfitPercent).toFixed(2);\r\n  const Profit = `+${ProfitUSDT} USDT (+${ProfitPercent}%)`;\r\n\r\n  return (\r\n    <div className= {classes.div}>\r\n    <table className={classes.body}>\r\n      <thead className={classes.head}>\r\n        <tr className={classes.tr}>\r\n          <th className={classes.th}>Symbol</th>\r\n          <th className={classes.th}>Size</th>\r\n          <th className={classes.th}>Entry Price</th>\r\n          <th className={classes.th}>Mark Price</th>\r\n          <th className={classes.th}>Liq.Price</th>\r\n          <th className={classes.th}>Margin</th>\r\n          <th className={classes.th}>PNL</th>\r\n          <th className={classes.closeall}>Close All Positions</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        <tr className={classes.trbody}>\r\n          <th className={classes.symbol}>\r\n            BTCUSDT\r\n            <div className={classes.leverage}>\r\n              <span>{b.Leverage}x</span>\r\n            </div>\r\n          </th>\r\n          <td className={classes.td}>2250.50 USDT</td>\r\n          <td className={classes.td}>20,048</td>\r\n          <LivePrice Price={Price} />\r\n          <td className={classes.liq}>16,753.42</td>\r\n          <td className={classes.td}>{Margin} USDT</td>\r\n          <td className={classes.pnl}>{Profit}</td>\r\n          <td className={classes.td}>\r\n            <div className={classes.close}>X</div>\r\n          </td>\r\n        </tr>\r\n      </tbody>\r\n      <tbody>\r\n        <tr className={classes.trbody}>\r\n          <th className={classes.symbol}>\r\n            XRPUSDT\r\n            <div className={classes.leverage}>\r\n              <span>5x</span>\r\n            </div>\r\n          </th>\r\n          <td className={classes.td}>2645.50 USDT</td>\r\n          <td className={classes.td}>0.6016</td>\r\n          <td className={classes.td}>0.7028</td>\r\n          <td className={classes.liq}>0.4652</td>\r\n          <td className={classes.td}>476.10 USDT</td>\r\n          <td className={classes.pnl}>+1546.07 USDT (+315.4%)</td>\r\n          <td className={classes.td}>\r\n            <div className={classes.close}>X</div>\r\n          </td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Positions;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}